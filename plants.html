<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Leafie ‚Äî Plants</title>
  <style>
    :root{
      --bg: #f3fbf3; --panel:#fff; --green:#66bb6a; --dark:#0f1720; --shadow: 0 6px 18px rgba(30,80,50,0.06);
    }
    html,body{height:100%;}
    body{margin:0; font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; background:var(--bg); color:var(--dark); display:flex;}
    .sidebar{width:220px; background:#eaf6ea; padding:28px 20px; box-shadow: inset -1px 0 0 rgba(0,0,0,0.03); display:flex; flex-direction:column; gap:18px;}
    .brand{display:flex; align-items:center; gap:10px; font-weight:700; color:var(--green);} .nav{ margin-top:12px; display:flex; flex-direction:column; gap:12px; }
    .nav a{ color:#2f4a50; text-decoration:none; padding:10px 8px; border-radius:8px; display:flex; gap:10px; align-items:center; }
    .nav a.active{ background:rgba(0,0,0,0.03); }
    .footer-note{ margin-top:auto; font-size:13px; color:#2f6b5b; }

    main{flex:1; padding:28px;}
    .page-title{ font-size:28px; font-weight:800; margin-bottom:18px; }

    .slots{ display:grid; grid-template-columns: repeat(4, 1fr); gap:18px; }
    .slot{ background:var(--panel); border-radius:12px; padding:18px; box-shadow:var(--shadow); border:1px solid rgba(0,0,0,0.04); display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:200px; }
    .add-btn{ background:var(--green); color:white; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:700; }
    .plant-card{ display:flex; flex-direction:column; align-items:center; gap:10px; }
    .plant-card img{ width:160px; height:120px; object-fit:cover; border-radius:8px; }
    .plant-name{ font-weight:800; }
    .plant-type{ color:#2b6b8a; font-size:13px; }
    .slot-actions{ display:flex; gap:8px; margin-top:8px; }
    .btn-ghost{ background:transparent; border:1px solid rgba(0,0,0,0.06); padding:8px 10px; border-radius:8px; cursor:pointer; }

    /* modal */
    .modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,0.25); display:flex; align-items:center; justify-content:center; }
    .modal{ background:var(--panel); padding:18px; border-radius:10px; width:540px; box-shadow:0 20px 50px rgba(0,0,0,0.2); }
    .options{ display:grid; grid-template-columns: repeat(2,1fr); gap:12px; }
    .option{ display:flex; gap:12px; align-items:center; padding:10px; border-radius:8px; cursor:pointer; border:1px solid rgba(0,0,0,0.04); }
    .option img{ width:72px; height:56px; object-fit:cover; border-radius:6px; }
    .option h4{ margin:0; font-size:15px; }
    .close-x{ float:right; cursor:pointer; }

    @media (max-width:900px){ .slots{ grid-template-columns:1fr; } .sidebar{display:none;} .modal{ width:92%; } }
  </style>
</head>
<body>
  <aside class="sidebar">
    <div class="brand">Leafie</div>
    <nav class="nav">
      <a href="leafy.html">üè† Dashboard</a>
      <a class="active" href="plants.html">üå± Plants</a>
      <a href="settings.html">‚öôÔ∏è Settings</a>
    </nav>
    <div class="footer-note">Happy Planting!</div>
  </aside>

  <main>
    <div class="page-title">Plants</div>
    <div class="slots" id="slots">
      <!-- four slots will be rendered here -->
    </div>
  </main>

  <!-- Modal template -->
  <template id="modalTpl">
    <div class="modal-backdrop" id="backdrop">
      <div class="modal">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
          <div style="font-weight:800; font-size:18px;">Choose a plant</div>
          <div class="close-x" id="closeBtn">‚úï</div>
        </div>
        <div class="options">
          <div class="option" data-key="fiddle">
            <img src="https://images.unsplash.com/photo-1595661001400-2c60b2c8a3b1?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=1a0e4c9c2bcf0a7d5834d26bfe8d5b9f">
            <div>
              <h4>Fiddle Leaf Plant</h4>
              <div class="small">Large glossy leaves</div>
            </div>
          </div>
          <div class="option" data-key="succulent">
            <img src="https://images.unsplash.com/photo-1518972559570-0b92d0d9d8f6?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=3e3c2b7b7b2a4f5b9f6b8c1a2b3c4d5e">
            <div>
              <h4>Hole Plant</h4>
              <div class="small">Large, trendy leaves with holes</div>
            </div>
          </div>
          <div class="option" data-key="herb">
            <img src="https://images.unsplash.com/photo-1547516508-4f9fda1a46b8?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=abcd1234abcd1234abcd1234abcd1234">
            <div>
              <h4>Peace Lily</h4>
              <div class="small">Elegant white blooms, likes humidity</div>
            </div>
          </div>
          <div class="option" data-key="fern">
            <img src="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=efef5678efef5678efef5678efef5678">
            <div>
              <h4>Gold Palm</h4>
              <div class="small">Airy fronds and tropical feel</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </template>

  <script>
    // plant definitions (use search queries to fetch relevant photos)
    const PLANTS = {
      fiddle: { name: 'Fiddle Leaf Plant', query: 'fiddle leaf fig' },
      succulent: { name: 'Hole Plant', query: 'monstera' },
      herb: { name: 'Peace Lily', query: 'peace lily' },
      fern: { name: 'Gold Palm', query: 'gold palm' }
    };

    const slotsEl = document.getElementById('slots');
    let plantsState = JSON.parse(localStorage.getItem('leafie.plants')||'[null,null,null,null]');

    function save(){ localStorage.setItem('leafie.plants', JSON.stringify(plantsState)); }

    function renderSlots(){
      slotsEl.innerHTML = '';
      for(let i=0;i<4;i++){
        const slot = document.createElement('div'); slot.className='slot';
        if(plantsState[i]){
          const p = plantsState[i];
          slot.innerHTML = `
            <div class="plant-card">
              <img src="${p.img}" alt="${p.name}">
              <div class="plant-name">${p.name}</div>
              <div class="plant-type">${p.typeLabel||p.name}</div>
              <div class="slot-actions">
                <button class="btn-ghost" data-action="change" data-index="${i}">Change</button>
                <button class="btn-ghost" data-action="remove" data-index="${i}">Remove</button>
              </div>
            </div>`;
        } else {
          slot.innerHTML = `<div style="text-align:center;"><div style="font-weight:700;margin-bottom:12px;">Empty slot</div><button class="add-btn" data-index="${i}">+ Add plant</button></div>`;
        }
        slotsEl.appendChild(slot);
      }
    }

    function openModal(slotIndex){
      const tpl = document.getElementById('modalTpl');
      const node = tpl.content.cloneNode(true);
      const backdrop = node.querySelector('.modal-backdrop');
      // before attaching, populate images from Unsplash search queries
      const opts = node.querySelectorAll('.option');
      opts.forEach(opt => {
        const key = opt.getAttribute('data-key');
        const q = (PLANTS[key] && PLANTS[key].query) ? PLANTS[key].query : PLANTS[key].name;
        const img = opt.querySelector('img');
        if(img){ img.src = `https://source.unsplash.com/400x300/?${encodeURIComponent(q)}`; }
      });
      document.body.appendChild(backdrop);

      function close(){ backdrop.remove(); }
      backdrop.querySelector('#closeBtn').addEventListener('click', close);
      backdrop.addEventListener('click', (e)=>{ if(e.target===backdrop) close(); });

      // option click
      const options = backdrop.querySelectorAll('.option');
      options.forEach(opt=>{
        opt.addEventListener('click', ()=>{
          const key = opt.getAttribute('data-key');
          const def = PLANTS[key];
          const q = (def && def.query) ? def.query : def.name;
          const imageUrl = `https://source.unsplash.com/400x300/?${encodeURIComponent(q)}`;
          plantsState[slotIndex] = { key, name: def.name, img: imageUrl, typeLabel: def.name };
          save(); renderSlots(); close();
        });
      });
    }

    // click delegation
    slotsEl.addEventListener('click', (e)=>{
      const add = e.target.closest('.add-btn');
      if(add){ openModal(parseInt(add.dataset.index,10)); return; }
      const btn = e.target.closest('button');
      if(btn && btn.dataset.action){ const idx = parseInt(btn.dataset.index,10); if(btn.dataset.action==='remove'){ plantsState[idx]=null; save(); renderSlots(); } else if(btn.dataset.action==='change'){ openModal(idx); } }
    });

    // initial render
    renderSlots();
  </script>
</body>
</html>